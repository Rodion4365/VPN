# WireGuard VPN –¥–ª—è Selectel

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ WireGuard VPN —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ (back, front) –∏ Docker.

## üéØ –ü–æ—á–µ–º—É WireGuard?

- **–ë—ã—Å—Ç—Ä–µ–µ**: –í 3-5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ OpenVPN
- **–õ–µ–≥—á–µ**: <1% CPU, 10-20 MB RAM
- **–ü—Ä–æ—â–µ**: –í—Å–µ–≥–æ 4000 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ vs 100000+ —É OpenVPN
- **–ù–∞–¥–µ–∂–Ω–µ–µ**: –í—Å—Ç—Ä–æ–µ–Ω –≤ —è–¥—Ä–æ Linux
- **–°–æ–≤–º–µ—Å—Ç–∏–º**: –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ —Å Docker –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–ü–æ–¥—Ä–æ–±–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞](#–ø–æ–¥—Ä–æ–±–Ω–∞—è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏](#—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–∫–ª–∏–µ–Ω—Ç–∞–º–∏)
- [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤](#–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ-–∫–ª–∏–µ–Ω—Ç–æ–≤)
- [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@YOUR_SERVER_IP
```

### 2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
cd /opt
git clone https://github.com/Rodion4365/VPN.git wireguard-setup
cd wireguard-setup
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É

```bash
chmod +x install-wireguard.sh
./install-wireguard.sh
```

### 4. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∏–µ–Ω—Ç–∞

```bash
chmod +x manage-wireguard.sh
./manage-wireguard.sh add my-laptop
```

### 5. –ü–æ–ª—É—á–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–î–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:**
```bash
# –ù–∞ –≤–∞—à–µ–º Mac/PC
scp root@YOUR_SERVER_IP:/root/wireguard-clients/my-laptop.conf .
```

**–î–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–ø—Ä–æ—â–µ):**
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–æ–∫–∞–∂–∏—Ç–µ QR –∫–æ–¥
./manage-wireguard.sh qr my-laptop
```

### 6. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å

- **Mac**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [WireGuard](https://apps.apple.com/app/wireguard/id1451685025), –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥
- **iOS**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WireGuard –∏–∑ App Store, –æ—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –∫–æ–¥
- **Android**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WireGuard –∏–∑ Play Store, –æ—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –∫–æ–¥
- **Windows**: –°–∫–∞—á–∞–π—Ç–µ —Å [wireguard.com](https://www.wireguard.com/install/), –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥
- **Linux**: `sudo wg-quick up my-laptop`

## üì¶ –ü–æ–¥—Ä–æ–±–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Ubuntu 20.04+ / Debian 10+ (WireGuard –≤ kernel)
- Root –¥–æ—Å—Ç—É–ø
- –ú–∏–Ω–∏–º—É–º 256 MB RAM
- –û—Ç–∫—Ä—ã—Ç—ã–π –ø–æ—Ä—Ç 51820/UDP –≤ Selectel firewall

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@YOUR_SERVER_IP

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ /opt
cd /opt

# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Rodion4365/VPN.git wireguard-setup
cd wireguard-setup

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É
chmod +x install-wireguard.sh
./install-wireguard.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç WireGuard
- –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–ª—é—á–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –ù–∞—Å—Ç—Ä–æ–∏—Ç firewall –∏ NAT
- –î–æ–±–∞–≤–∏—Ç –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è Docker (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
- –ó–∞–ø—É—Å—Ç–∏—Ç WireGuard

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç –≤ Selectel

–í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Selectel –æ—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç **51820/UDP** –¥–ª—è –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã
systemctl status wg-quick@wg0

# –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å WireGuard
wg show

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å IP forwarding
sysctl net.ipv4.ip_forward
```

## üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞–º–∏

### –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞

```bash
./manage-wireguard.sh add <–∏–º—è-–∫–ª–∏–µ–Ω—Ç–∞>
```

–ü—Ä–∏–º–µ—Ä—ã:
```bash
./manage-wireguard.sh add laptop
./manage-wireguard.sh add iphone
./manage-wireguard.sh add work-pc
```

### –ü–æ–∫–∞–∑–∞—Ç—å QR –∫–æ–¥ (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö)

```bash
./manage-wireguard.sh qr <–∏–º—è-–∫–ª–∏–µ–Ω—Ç–∞>
```

–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –∫–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ WireGuard –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ.

### –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

```bash
./manage-wireguard.sh list
```

### –£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞

```bash
./manage-wireguard.sh remove <–∏–º—è-–∫–ª–∏–µ–Ω—Ç–∞>
```

### –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

```bash
./manage-wireguard.sh connected
```

## üì± –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤

### macOS

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WireGuard –∏–∑ App Store
2. –°–∫–∞—á–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥:
   ```bash
   scp root@YOUR_SERVER_IP:/root/wireguard-clients/my-laptop.conf .
   ```
3. –û—Ç–∫—Ä–æ–π—Ç–µ WireGuard ‚Üí "Import tunnel(s) from file"
4. –í—ã–±–µ—Ä–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π —Ñ–∞–π–ª `.conf`
5. –ù–∞–∂–º–∏—Ç–µ "Activate"

### iOS / iPadOS

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WireGuard –∏–∑ App Store
2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ QR –∫–æ–¥:
   ```bash
   ./manage-wireguard.sh qr my-iphone
   ```
3. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞–∂–º–∏—Ç–µ "+"
4. –í—ã–±–µ—Ä–∏—Ç–µ "Create from QR code"
5. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –∫–æ–¥
6. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Ç—É–Ω–Ω–µ–ª—å

### Android

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WireGuard –∏–∑ Play Store
2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–æ–∑–¥–∞–π—Ç–µ QR –∫–æ–¥:
   ```bash
   ./manage-wireguard.sh qr my-phone
   ```
3. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞–∂–º–∏—Ç–µ "+"
4. –í—ã–±–µ—Ä–∏—Ç–µ "Scan from QR code"
5. –û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR –∫–æ–¥
6. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —Ç—É–Ω–Ω–µ–ª—å

### Windows

1. –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ —Å [wireguard.com/install](https://www.wireguard.com/install/)
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WireGuard
3. –°–∫–∞—á–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ —á–µ—Ä–µ–∑ WinSCP –∏–ª–∏:
   ```powershell
   scp root@YOUR_SERVER_IP:/root/wireguard-clients/my-pc.conf .
   ```
4. –í WireGuard –Ω–∞–∂–º–∏—Ç–µ "Import tunnel(s) from file"
5. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `.conf`
6. –ù–∞–∂–º–∏—Ç–µ "Activate"

### Linux

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WireGuard:
   ```bash
   sudo apt install wireguard  # Ubuntu/Debian
   sudo yum install wireguard-tools  # CentOS/RHEL
   ```

2. –°–∫–∞—á–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥:
   ```bash
   scp root@YOUR_SERVER_IP:/root/wireguard-clients/my-linux.conf /etc/wireguard/wg0.conf
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   sudo wg-quick up wg0

   # –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
   sudo systemctl enable wg-quick@wg0
   ```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
chmod +x monitor-wireguard.sh
./monitor-wireguard.sh
```

–ú–æ–Ω–∏—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –°—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã –∏ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –∏ –ø–∞–º—è—Ç–∏ (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ!)
- –°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫
- –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã —Å –≤—Ä–µ–º–µ–Ω–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ handshake
- –û–±—â—É—é –∑–∞–≥—Ä—É–∑–∫—É —Å–∏—Å—Ç–µ–º—ã

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
./monitor-wireguard.sh --quick
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ VPN:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞—à IP (–¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å IP —Å–µ—Ä–≤–µ—Ä–∞)
curl ifconfig.me

# –ü–∏–Ω–≥ VPN —à–ª—é–∑–∞
ping -c 3 10.66.66.1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS
ping -c 3 google.com
```

## ‚öôÔ∏è –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ WireGuard

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **CPU**: –û–±—ã—á–Ω–æ <0.5%, –º–∞–∫—Å–∏–º—É–º 1-2% –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- **–ü–∞–º—è—Ç—å**: 10-20 MB (–≤ 10 —Ä–∞–∑ –º–µ–Ω—å—à–µ OpenVPN)
- **–°–∫–æ—Ä–æ—Å—Ç—å**: –í 3-5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ OpenVPN
- **–ë–∞—Ç–∞—Ä–µ—è**: –ú–µ–Ω—å—à–µ —Ä–∞—Å—Ö–æ–¥ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### –ü—Ä–æ—Å—Ç–æ—Ç–∞

- –í—Å–µ–≥–æ 4000 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞
- –í—Å—Ç—Ä–æ–µ–Ω –≤ Linux kernel 5.6+
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ NAT –±–µ–∑ –ø—Ä–æ–±–ª–µ–º

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Docker

- –ù–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å Docker iptables
- PostUp/PostDown –ø—Ä–∞–≤–∏–ª–∞ —É—á–∏—Ç—ã–≤–∞—é—Ç Docker
- –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å VPN –∏ Docker –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã
- ChaCha20 –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- Poly1305 –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- Curve25519 –¥–ª—è –æ–±–º–µ–Ω–∞ –∫–ª—é—á–∞–º–∏
- –ú–µ–Ω—å—à–µ –∫–æ–¥–∞ = –º–µ–Ω—å—à–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### WireGuard –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status wg-quick@wg0

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
journalctl -u wg-quick@wg0 -n 50

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
wg show
```

### –ö–ª–∏–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
   ```bash
   iptables -L INPUT -n | grep 51820
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall Selectel:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 51820/UDP –æ—Ç–∫—Ä—ã—Ç

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ IP forwarding:**
   ```bash
   sysctl net.ipv4.ip_forward
   # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: net.ipv4.ip_forward = 1
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ WireGuard –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
   ```bash
   ip addr show wg0
   wg show wg0
   ```

### –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ NAT
iptables -t nat -L POSTROUTING -n -v | grep 10.66.66

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–∞—Ä—à—Ä—É—Ç—ã
ip route

# –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
ping 10.66.66.1  # –ü–∏–Ω–≥ VPN —à–ª—é–∑–∞
ping 8.8.8.8     # –ü–∏–Ω–≥ Google DNS
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å

1. WireGuard –æ–±—ã—á–Ω–æ –±—ã—Å—Ç—Ä–µ–µ OpenVPN
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É —Å–µ—Ä–≤–µ—Ä–∞: `./monitor-wireguard.sh --quick`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ MTU (–æ–±—ã—á–Ω–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è WireGuard)

### –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å
systemctl stop wg-quick@wg0
systemctl disable wg-quick@wg0
rm -rf /etc/wireguard/*

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–Ω–æ–≤–æ
./install-wireguard.sh
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
/etc/wireguard/
‚îú‚îÄ‚îÄ wg0.conf                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ server_private.key      # –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ server_public.key       # –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á —Å–µ—Ä–≤–µ—Ä–∞
‚îî‚îÄ‚îÄ server_info.txt         # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ

/root/wireguard-clients/    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
‚îî‚îÄ‚îÄ *.conf
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –û–±–Ω–æ–≤–∏—Ç—å WireGuard
apt update
apt upgrade wireguard wireguard-tools

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª—É–∂–±—É
systemctl restart wg-quick@wg0
```

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å OpenVPN

| –ü–∞—Ä–∞–º–µ—Ç—Ä | WireGuard | OpenVPN |
|----------|-----------|---------|
| CPU | <1% | 5-15% |
| RAM | 10-20 MB | 50-200 MB |
| –°–∫–æ—Ä–æ—Å—Ç—å | 1000+ Mbps | 100-300 Mbps |
| –ö–æ–¥ | 4000 —Å—Ç—Ä–æ–∫ | 100000+ —Å—Ç—Ä–æ–∫ |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ | 5 –º–∏–Ω—É—Ç | 30+ –º–∏–Ω—É—Ç |
| Docker | –ë–µ–∑ –ø—Ä–æ–±–ª–µ–º | –ú–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å |
| –ú–æ–±–∏–ª—å–Ω–∞—è –±–∞—Ç–∞—Ä–µ—è | –≠–∫–æ–Ω–æ–º–∏—Ç | –†–∞–∑—Ä—è–∂–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ |
| –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç WireGuard](https://www.wireguard.com/)
- [WireGuard –Ω–∞ GitHub](https://github.com/WireGuard)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è WireGuard](https://www.wireguard.com/quickstart/)
- [WireGuard –¥–ª—è iOS](https://apps.apple.com/app/wireguard/id1451685025)
- [WireGuard –¥–ª—è Android](https://play.google.com/store/apps/details?id=com.wireguard.android)

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –ª–∏—á–Ω—ã—Ö –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `systemctl status wg-quick@wg0`
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: `wg show`
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä: `./monitor-wireguard.sh`

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: WireGuard —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏. –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ (<1% CPU, 10-20 MB RAM) –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤–∞—à–∏ back –∏ front –ø—Ä–æ–µ–∫—Ç—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –ø–æ–º–µ—Ö.
